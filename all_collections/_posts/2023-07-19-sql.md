---
layout: post
title: ğŸ“ƒ SQL ë°ì´í„°ë² ì´ìŠ¤ ë‹¤ë£¨ê¸°
date: 2023-07-19
categories: ["SamBeak", "sql", "database", "db", "backend"]
---

> # SQL ê¸°ë³¸ë¬¸

<br>
CRUDì™€ ê´€ë ¨í•´ ë…¸ë“œë¥¼ ê³µë¶€í•˜ëŠ” ìš”ì¦˜, <br>
SQLì„ ì‘ì„±í•´ì•¼í•  ë•Œê°€ ì¦ë‹¤. <br>
ê·¸ë˜ì„œ ì˜¤ëŠ˜ì€ SQL ë¬¸ë²•ì„ ì •ë¦¬í•˜ê³ , <br>
í•´ë‹¹ ë¬¸ë²•ì„ í™œìš©í•˜ëŠ” ê²ƒì— ëŒ€í•´ ì •ë¦¬í•˜ê³ ì í•œë‹¤. <br><br>

CRUDëŠ” ì°¨ë¡€ë¡œ Create, Read , Update, Deleteë¥¼ ì˜ë¯¸í•œë‹¤. <br>
ì–¸ì–´ë¥¼ ì‘ì„±í•˜ë©´ ê¼­ ;ìœ¼ë¡œ ë§ˆë¬´ë¦¬ í•´ì¤€ë‹¤. <br>

| ì–¸ì–´ (SQL)
|------------------------------------------------------------|
| Keword | ë‚´ìš© |
| -------- | ----------------------------------------------------------- |
| show databases | ë°ì´í„°ë² ì´ìŠ¤ ëª©ë¡ì„ ë³´ì—¬ë¼ |
| create database databaseName | ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ë§Œë“ ë‹¤ |
| use databaseName | ë°ì´í„°ë² ì´ìŠ¤ë„¤ì„ì˜ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì‚¬ìš©í•œë‹¤ |
| drop databaseName | ë°ì´í„°ë² ì´ìŠ¤ë„¤ì„ì˜ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì‚­ì œí•œë‹¤ |
| show tables | ë°ì´í„°ë² ì´ìŠ¤ ì•ˆì— ìˆëŠ” í…Œì´ë¸”ì„ ëª¨ë‘ ë³´ì—¬ë¼ |
| create table tableName(fieldName Type length(NOT NULL) PRIMARY KEY AUTO_INCREMENT...) ENGINE InnoDB DEFAULT CHARSET=utf8mb4; | ì„¸ë¶€ì‚¬í•­, ì†ì„± ì§€ì • í…Œì´ë¸” ìƒì„± |
| desc tableName | í…Œì´ë¸”ì˜ êµ¬ì¡°ë¥¼ ë³´ì—¬ë¼ |
| select \* from tableName | í…Œì´ë¸” ì•ˆì˜ ëª¨ë“  ëª©ë¡ì„ ë³´ì—¬ë¼ |
| select columnName from tableName | í…Œì´ë¸” ì•ˆì˜ columnNameì„ ë³´ì—¬ë¼ |
| select \* from tableName order by columnName DESC | í…Œì´ë¸” ì•ˆì˜ ëª¨ë“  ëª©ë¡ ì¤‘ì—ì„œ ì»¬ëŸ¼ë„¤ì„ì„ ì˜¤ë¦„ì°¨ìˆœìœ¼ë¡œ ë³´ì—¬ë¼ |
| select \* from tableName order by columnName ASC | í…Œì´ë¸” ì•ˆì˜ ëª¨ë“  ëª©ë¡ ì¤‘ì—ì„œ ì»¬ëŸ¼ë„¤ì„ì„ ë‚´ë¦¼ì°¨ìˆœìœ¼ë¡œ ë³´ì—¬ë¼ |
| alter table `tableName` add column `fieldName` type length... | í…Œì´ë¸” ì•ˆì— í•„ë“œë¥¼ ì¶”ê°€í•˜ë¼ |
| alter table `tableName` change column `fieldName` `fieldName`(ìˆ˜ì •í• í•„ë“œë‚´ìš©) type length...| í…Œì´ë¸” ì•ˆì— í•„ë“œë¥¼ ë³€ê²½í•˜ë¼ |
| update tableNmae set fieldName | í…Œì´ë¸” ì•ˆì— í•„ë“œë¥¼ ì¶”ê°€í•˜ë¼ |
| delete from tableName where(ì¡°ê±´) | ì¡°ê±´ ì•ˆì— í¬í•¨ëœ ê²ƒë“¤ì„ í…Œì´ë¸”ì—ì„œ ì‚­ì œí•˜ë¼ |
| insert into tableName(column1, column2,...) values(value1, value2, ...), ( ), ( ), ( ) | í…Œì´ë¸” ì»¬ëŸ¼ì— ê°’ ì¶”ê°€í•˜ë¼ |

- asc: ì‘ì€ê²ƒë¶€í„° í° ê²ƒìœ¼ë¡œ
- desc : í° ê²ƒë¶€í„° ì‘ì€ ê²ƒìœ¼ë¡œ

> # ëª…ë ¹ì–´ ì •ë¦¬

<br>
ìœ„ë¥¼ ë³´ê³  ì´í•´í•˜ê³ ìí•´ë„ ë‚œì¡í•  ë•Œê°€ ìˆë‹¤. <br>
ì„¸ë¶€ë¥¼ ì¶”ê°€í•´ë³´ì <br>

|ëª…ë ¹ì–´|ë‚´ìš©|
|order by columName desc(asc) | descëŠ” ì˜¤ë¦„ì°¨ìˆœ, ascëŠ” ë‚´ë¦¼ì°¨ìˆœì´ë‹¤. |
|select distinct | ì¤‘ë³µ ì—†ì´ ë‚˜ì—´í•  ë•Œ ì‚¬ìš©í•œë‹¤. |
|where | í•„í„°ë§í•  ë•Œ ì‚¬ìš©í•œë‹¤. |
|from | ì–´ëŠ í…Œì´ë¸”ì—ì„œ ê°–ë‹¤ ì“¸ ê²ƒì¸ì§€ |
|like | ì™€ì¼ë“œì¹´ë“œ, ì •ê·œí‘œí˜„ì‹ ì°¸ì¡°, ë³´í†µ '%[]%' ë°©ì‹ ì‚¬ìš©,|
|between a and b | aì™€ bì‚¬ì´ì˜ ë²”ìœ„ |
|where columnName in (value1, value2,...) | ì—¬ëŸ¬ ì¡°ê±´ ê°’ ì§€ì •|
|where locate(value, columnName) > 0 | columnNameì— valueê°€ ìˆëŠ”ì§€ ì¡°ê±´ |
|where instr(columnName, value) > 0 | columnNameì— valueê°€ ìˆëŠ”ì§€ ì¡°ê±´ |
|limit number | limitì€ ì¶œë ¥í•  í–‰ì˜ ìˆ˜ë¥¼ ì œí•œí•˜ëŠ” ëª…ë ¹ì–´ |
|count(columnName or \*) | ìˆ˜ë¥¼ ì„¼ë‹¤. |
|AS | ASëŠ” ë³„ì¹­ì„ ì˜ë¯¸í•œë‹¤. |
|max | maxëŠ” ì£¼ë¡œ í•˜ë‚˜ì˜ ê°’ë§Œ ë°˜í™˜ whereì—ì„œ ì‚¬ìš©í•  ë•ŒëŠ” ë¹„êµì—°ì‚°ìë¥¼ ì‚¬ìš©í•œë‹¤.|
|min | minì€ ì£¼ë¡œ í•˜ë‚˜ì˜ ê°’ë§Œ ë°˜í™˜ whereì—ì„œ ì‚¬ìš©í•  ë•ŒëŠ” ë¹„êµì—°ì‚°ìë¥¼ ì‚¬ìš©í•œë‹¤.|
|sum | sumì€ ì£¼ë¡œ í•˜ë‚˜ì˜ ê°’ë§Œ ë°˜í™˜ whereì—ì„œ ì‚¬ìš©í•  ë•ŒëŠ” ë¹„êµì—°ì‚°ìë¥¼ ì‚¬ìš©í•œë‹¤.|
|avg | avgëŠ” ì£¼ë¡œ í•˜ë‚˜ì˜ ê°’ë§Œ ë°˜í™˜ whereì—ì„œ ì‚¬ìš©í•  ë•ŒëŠ” ë¹„êµì—°ì‚°ìë¥¼ ì‚¬ìš©í•œë‹¤.|
|group by | group byëŠ” ê·¸ë£¹ì„ ì§€ì •í•œë‹¤.|
|having | havingì€ ê·¸ë£¹ì— ì¡°ê±´ì„ ì§€ì •í•œë‹¤. count(name)>1|
|offset | offsetì€ ì¶œë ¥í•  í–‰ì˜ ì‹œì‘ì ì„ ì§€ì •í•œë‹¤.|
|and | andëŠ” ì—¬ëŸ¬ê°œì˜ ì¡°ê±´ì„ ì§€ì •í•  ë•Œ ì‚¬ìš©í•œë‹¤.|
|or | orëŠ” ì—¬ëŸ¬ê°œì˜ ì¡°ê±´ì„ ì§€ì •í•  ë•Œ ì‚¬ìš©í•œë‹¤.|
|not | notì€ ì¡°ê±´ì„ ë°˜ëŒ€ë¡œ ì§€ì •í•  ë•Œ ì‚¬ìš©í•œë‹¤.|
|hour | hourì€ ì‹œê°„ì„ ì¶”ì¶œí•  ë•Œ ì‚¬ìš©í•œë‹¤.|
|minute | minuteì€ ë¶„ì„ ì¶”ì¶œí•  ë•Œ ì‚¬ìš©í•œë‹¤.|
|second | secondëŠ” ì´ˆë¥¼ ì¶”ì¶œí•  ë•Œ ì‚¬ìš©í•œë‹¤.|
|date | dateëŠ” ë‚ ì§œë¥¼ ì¶”ì¶œí•  ë•Œ ì‚¬ìš©í•œë‹¤.|
|year | yearì€ ë…„ë„ë¥¼ ì¶”ì¶œí•  ë•Œ ì‚¬ìš©í•œë‹¤.|
|month | monthëŠ” ì›”ì„ ì¶”ì¶œí•  ë•Œ ì‚¬ìš©í•œë‹¤.|
|day | dayëŠ” ì¼ì„ ì¶”ì¶œí•  ë•Œ ì‚¬ìš©í•œë‹¤.|
|week | weekëŠ” ì£¼ë¥¼ ì¶”ì¶œí•  ë•Œ ì‚¬ìš©í•œë‹¤.|
|dayofweek | dayofweekëŠ” ìš”ì¼ì„ ì¶”ì¶œí•  ë•Œ ì‚¬ìš©í•œë‹¤.|
|dayofyear | dayofyearëŠ” ë…„ ì¤‘ ëª‡ ë²ˆì§¸ ë‚ ì¸ì§€ ì¶”ì¶œí•  ë•Œ ì‚¬ìš©í•œë‹¤.|
|last_day | last_dayëŠ” í•´ë‹¹ ì›”ì˜ ë§ˆì§€ë§‰ ë‚ ì§œë¥¼ ì¶”ì¶œí•  ë•Œ ì‚¬ìš©í•œë‹¤.|
|quarter | quarterëŠ” í•´ë‹¹ ë…„ë„ì˜ ëª‡ ë¶„ê¸°ì¸ì§€ ì¶”ì¶œí•  ë•Œ ì‚¬ìš©í•œë‹¤.|
|to_days | to_daysëŠ” ë‚ ì§œë¥¼ ì¶”ì¶œí•  ë•Œ ì‚¬ìš©í•œë‹¤.|
|from_days | from_daysëŠ” ë‚ ì§œë¥¼ ì¶”ì¶œí•  ë•Œ ì‚¬ìš©í•œë‹¤.|
|date_format | date_formatì€ ë‚ ì§œë¥¼ ì§€ì •ëœ í˜•ì‹ìœ¼ë¡œ ì¶œë ¥í•  ë•Œ ì‚¬ìš©í•œë‹¤.|
|time_format | time_formatì€ ì‹œê°„ì„ ì§€ì •ëœ í˜•ì‹ìœ¼ë¡œ ì¶œë ¥í•  ë•Œ ì‚¬ìš©í•œë‹¤.|
|timestampdiff | timestampdiffëŠ” ë‘ ë‚ ì§œì˜ ì°¨ì´ë¥¼ êµ¬í•  ë•Œ ì‚¬ìš©í•œë‹¤.|
|timestampadd | timestampaddëŠ” ë‚ ì§œì— ì¼ì • ê¸°ê°„ì„ ë”í•  ë•Œ ì‚¬ìš©í•œë‹¤.|
|timediff | timediffëŠ” ë‘ ì‹œê°„ì˜ ì°¨ì´ë¥¼ êµ¬í•  ë•Œ ì‚¬ìš©í•œë‹¤.|
|date_add | date_addëŠ” ë‚ ì§œì— ì¼ì • ê¸°ê°„ì„ ë”í•  ë•Œ ì‚¬ìš©í•œë‹¤.|
|date_sub | date_subëŠ” ë‚ ì§œì— ì¼ì • ê¸°ê°„ì„ ëº„ ë•Œ ì‚¬ìš©í•œë‹¤.|
|addtime | addtimeì€ ì‹œê°„ì— ì¼ì • ê¸°ê°„ì„ ë”í•  ë•Œ ì‚¬ìš©í•œë‹¤.|
|subtime | subtimeì€ ì‹œê°„ì— ì¼ì • ê¸°ê°„ì„ ëº„ ë•Œ ì‚¬ìš©í•œë‹¤.|
|with recursive | with recursive ì¬ê·€ì ìœ¼ë¡œ í…Œì´ë¸”ì„ ë§Œë“¤ ë•Œ ì‚¬ìš©í•œë‹¤.|
|left join | left joinì€ ì™¼ìª½ í…Œì´ë¸”ì„ ê¸°ì¤€ìœ¼ë¡œ ì˜¤ë¥¸ìª½ í…Œì´ë¸”ì„ í•©ì¹  ë•Œ ì‚¬ìš©í•œë‹¤.|
|right join | right joinì€ ì˜¤ë¥¸ìª½ í…Œì´ë¸”ì„ ê¸°ì¤€ìœ¼ë¡œ ì™¼ìª½ í…Œì´ë¸”ì„ í•©ì¹  ë•Œ ì‚¬ìš©í•œë‹¤.|
|full outer join | full outer joinì€ ì™¼ìª½ í…Œì´ë¸”ê³¼ ì˜¤ë¥¸ìª½ í…Œì´ë¸”ì„ í•©ì¹  ë•Œ ì‚¬ìš©í•œë‹¤.|
|cross join | cross joinì€ ì™¼ìª½ í…Œì´ë¸”ê³¼ ì˜¤ë¥¸ìª½ í…Œì´ë¸”ì„ ëª¨ë‘ í•©ì¹  ë•Œ ì‚¬ìš©í•œë‹¤.|
|natural join | natural joinì€ ì™¼ìª½ í…Œì´ë¸”ê³¼ ì˜¤ë¥¸ìª½ í…Œì´ë¸”ì„ ëª¨ë‘ í•©ì¹  ë•Œ ì‚¬ìš©í•œë‹¤.|
|inner join | inner joinì€ ì™¼ìª½ í…Œì´ë¸”ê³¼ ì˜¤ë¥¸ìª½ í…Œì´ë¸”ì„ ëª¨ë‘ í•©ì¹  ë•Œ ì‚¬ìš©í•œë‹¤.|
|on extract | on extractëŠ” ì¡°ê±´ì„ ì§€ì •í•  ë•Œ ì‚¬ìš©í•œë‹¤.|
|case when then else end| ifë¬¸ê³¼ ë¹„ìŠ·í•œ ì—­í• ì„ í•œë‹¤. whenì ˆì—ëŠ” ì¡°ê±´ì„, thenì ˆì—ëŠ” ì¡°ê±´ì´ ì°¸ì¼ ë•Œ ì‹¤í–‰í•  ì¿¼ë¦¬ë¥¼, elseì ˆì—ëŠ” ì¡°ê±´ì´ ê±°ì§“ì¼ ë•Œ ì‹¤í–‰í•  ì¿¼ë¦¬ë¥¼ ì‘ì„±í•œë‹¤. end ì ˆì€ caseë¬¸ì˜ ëì„ ì˜ë¯¸í•œë‹¤.|
|inner join | ë‘ í…Œì´ë¸”ì˜ êµì§‘í•©ì„ ë°˜í™˜í•©ë‹ˆë‹¤.|
|inner join on | on ì ˆì—ëŠ” êµì§‘í•©ì„ êµ¬í•  ê¸°ì¤€ì´ ë˜ëŠ” ì»¬ëŸ¼ì„ ì§€ì •í•œë‹¤. whereì˜ ì—­í• |

left joinì€ ì™¼ìª½ í…Œì´ë¸”ì˜ ëª¨ë“  ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê³  ì˜¤ë¥¸ìª½ í…Œì´ë¸”ì˜ ë°ì´í„°ëŠ” ì¼ì¹˜í•˜ëŠ” ë°ì´í„°ë§Œ ê°€ì ¸ì˜¨ë‹¤. <br>

> # SQL ì‘ì„± ì˜ˆì‹œ

<br>

```java

public int signup(UserDTO userDTO) {
        String SQL = "INSERT INTO kurly_table(user_id, user_pw, user_name, user_email, user_hp, user_addr, user_gender, user_birth) VALUES(?,?,?,?,?,?,?,?)";
        try {
            ps = conn.prepareStatement(SQL);
            ps.setString(1, userDTO.getUser_id());
            ps.setString(2, userDTO.getUser_pw());
            ps.setString(3, userDTO.getUser_name());
            ps.setString(4, userDTO.getUser_email());
            ps.setString(5, userDTO.getUser_hp());
            ps.setString(6, userDTO.getUser_addr());
            ps.setString(7, userDTO.getUser_gender());
            ps.setString(8, userDTO.getUser_birth());
            return ps.executeUpdate();
        } catch (Exception e) {
            e.printStackTrace();
        }
        return -1;
    }

public int signin(String user_id, String user_pw) {
        String SQL = "SELECT user_pw FROM kurly_table WHERE user_id=?";
        try {
            ps = conn.prepareStatement(SQL);
            ps.setString(1, user_id);
            rs = ps.executeQuery();

            if(rs.next()){
                if(rs.getString(1).equals(user_pw)){
                    return 1;
                }
                else{
                    return 0;
                }
            }
            else{
                return -1;
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
        return -2;
    }

public int update(UserDTO userDTO) {
        String SQL = "UPDATE kurly_table SET user_pw=?, user_name=?, user_email=?, user_hp=?, user_addr=?, user_gender=?, user_birth=? WHERE user_id=?";
        try {
            ps = conn.prepareStatement(SQL);
            ps.setString(1, userDTO.getUser_pw());
            ps.setString(2, userDTO.getUser_name());
            ps.setString(3, userDTO.getUser_email());
            ps.setString(4, userDTO.getUser_hp());
            ps.setString(5, userDTO.getUser_addr());
            ps.setString(6, userDTO.getUser_gender());
            ps.setString(7, userDTO.getUser_birth());
            ps.setString(8, userDTO.getUser_id());
            return ps.executeUpdate();
        } catch (Exception e) {
            e.printStackTrace();
        }
        return -1;
    }

public int delete(UserDTO userDTO) {
    String SQL = "DELETE FROM kurly_table WHERE user_id=? AND user_pw=?";
    try {
        ps = conn.prepareStatement(SQL);
        ps.setString(1, userDTO.getUser_id());
        ps.setString(2, userDTO.getUser_pw());
        return ps.executeUpdate();
    } catch (Exception e) {
        e.printStackTrace();
    }
    return -1;
}
```
