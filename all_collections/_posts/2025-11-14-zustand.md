---
layout: post
title: ğŸ» Zustand ì™„ë²½ ê°€ì´ë“œ (React ìƒíƒœ ê´€ë¦¬ì˜ ìƒˆë¡œìš´ í‘œì¤€)
date: 2025-11-14
categories: ["SamBeak", "Frontend", "React", "Zustand", "StateManagement"]
---

# Zustandë€ ë¬´ì—‡ì¸ê°€

<br>
í•™êµ ì‚¬ë¬¼í•¨ì„ ìƒê°í•´ë³´ì. <br>
ê° í•™ìƒì´ ìê¸° ì‚¬ë¬¼í•¨ì— ë¬¼ê±´ì„ ë„£ê³  ë¹¼ë“¯ì´, <br>
ZustandëŠ” ì•±ì˜ ë°ì´í„°ë¥¼ ì €ì¥í•˜ê³  êº¼ë‚´ëŠ” ì‚¬ë¬¼í•¨ì´ë‹¤. <br><br>

ReduxëŠ” ê±°ëŒ€í•œ ì°½ê³  ê°™ë‹¤. <br>
ë¬¼ê±´ í•˜ë‚˜ ë„£ìœ¼ë ¤ë©´ ì„œë¥˜ ì‘ì„±í•˜ê³ , ìŠ¹ì¸ë°›ê³ , ê¸°ë¡í•´ì•¼ í•œë‹¤. <br><br>

ZustandëŠ” ê°œì¸ ì‚¬ë¬¼í•¨ ê°™ë‹¤. <br>
ì—´ì‡ ë§Œ ìˆìœ¼ë©´ ë°”ë¡œ ë„£ê³  ëº„ ìˆ˜ ìˆë‹¤. <br>
ê°„ë‹¨í•˜ê³ , ë¹ ë¥´ê³ , í¸í•˜ë‹¤. <br><br>

> ## ì™œ Zustandë¥¼ ë°°ì›Œì•¼ í• ê¹Œ?

<br>

**ì´ìœ  1: ê°„ë‹¨í•¨** <br>
Redux ëŒ€ë¹„ 80% ì ì€ ì½”ë“œ <br><br>

**ì´ìœ  2: ë¹ ë¥¸ ì„±ëŠ¥** <br>
í•„ìš”í•œ ì»´í¬ë„ŒíŠ¸ë§Œ ë¦¬ë Œë”ë§ <br><br>

**ì´ìœ  3: TypeScript ì¹œí™”ì ** <br>
íƒ€ì… ì¶”ë¡ ì´ ìë™ìœ¼ë¡œ ë™ì‘ <br><br>

**ì´ìœ  4: ë²ˆë“¤ í¬ê¸°** <br>
ë‹¨ 1KB (gzipped) <br><br>

# ê¸°ë³¸ ê°œë… ìš”ì•½

<br>

## ğŸ·ï¸ ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¹„êµ

<br>

| êµ¬ë¶„                | Redux | Zustand | Recoil | Jotai |
| ------------------- | ----- | ------- | ------ | ----- |
| **ë³´ì¼ëŸ¬í”Œë ˆì´íŠ¸**  | ë§ìŒ  | ì ìŒ    | ì¤‘ê°„   | ì ìŒ  |
| **ë²ˆë“¤ í¬ê¸°**       | 7KB   | 1KB     | 20KB   | 3KB   |
| **í•™ìŠµ ê³¡ì„ **       | ë†’ìŒ  | ë‚®ìŒ    | ì¤‘ê°„   | ë‚®ìŒ  |
| **DevTools**        | ì§€ì›  | ì§€ì›    | ì§€ì›   | ì§€ì›  |
| **ë¯¸ë“¤ì›¨ì–´**        | í•„ìˆ˜  | ì„ íƒ    | ì—†ìŒ   | ì—†ìŒ  |
| **React ì™¸ë¶€ ì‚¬ìš©** | ê°€ëŠ¥  | ê°€ëŠ¥    | ë¶ˆê°€   | ë¶ˆê°€  |

<br>

## ğŸ·ï¸ Zustand í•µì‹¬ ê°œë…

<br>

### Store (ì €ì¥ì†Œ)

<br>
**ê°œë…**: ìƒíƒœì™€ ì•¡ì…˜ì„ ë‹´ëŠ” ì»¨í…Œì´ë„ˆ <br><br>

```typescript
// ì‚¬ë¬¼í•¨ = Store
// ì‚¬ë¬¼í•¨ ì•ˆì˜ ë¬¼ê±´ = State
// ë¬¼ê±´ ë„£ê¸°/ë¹¼ê¸° = Actions
```

<br>

### State (ìƒíƒœ)

<br>
**ê°œë…**: ì €ì¥ëœ ë°ì´í„° <br><br>

**ì˜ˆì‹œ**:

- ë¡œê·¸ì¸í•œ ì‚¬ìš©ì ì •ë³´
- ì¥ë°”êµ¬ë‹ˆ ìƒí’ˆ ëª©ë¡
- ë‹¤í¬ëª¨ë“œ ì„¤ì •

<br>

### Actions (ì•¡ì…˜)

<br>
**ê°œë…**: ìƒíƒœë¥¼ ë³€ê²½í•˜ëŠ” í•¨ìˆ˜ <br><br>

**ì˜ˆì‹œ**:

- ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒ
- ìƒí’ˆ ì¶”ê°€/ì‚­ì œ
- í…Œë§ˆ ë³€ê²½

<br>

## ğŸ·ï¸ Zustand vs Redux ì½”ë“œ ë¹„êµ

<br>

### Redux ë°©ì‹ (ë³µì¡í•¨)

<br>

```typescript
// 1. Action Types
const INCREMENT = "INCREMENT";
const DECREMENT = "DECREMENT";

// 2. Action Creators
const increment = () => ({ type: INCREMENT });
const decrement = () => ({ type: DECREMENT });

// 3. Reducer
const counterReducer = (state = { count: 0 }, action) => {
  switch (action.type) {
    case INCREMENT:
      return { count: state.count + 1 };
    case DECREMENT:
      return { count: state.count - 1 };
    default:
      return state;
  }
};

// 4. Store
const store = createStore(counterReducer);

// 5. Component (connect ë˜ëŠ” useSelector/useDispatch)
const Counter = () => {
  const count = useSelector((state) => state.count);
  const dispatch = useDispatch();

  return (
    <div>
      <span>{count}</span>
      <button onClick={() => dispatch(increment())}>+</button>
    </div>
  );
};
```

<br>

### Zustand ë°©ì‹ (ê°„ë‹¨í•¨)

<br>

```typescript
// 1. Store (ìƒíƒœ + ì•¡ì…˜ í•œ ë²ˆì—)
const useCounterStore = create((set) => ({
  count: 0,
  increment: () => set((state) => ({ count: state.count + 1 })),
  decrement: () => set((state) => ({ count: state.count - 1 })),
}));

// 2. Component
const Counter = () => {
  const { count, increment } = useCounterStore();

  return (
    <div>
      <span>{count}</span>
      <button onClick={increment}>+</button>
    </div>
  );
};
```

<br>

# ì‹¤ì „ ì˜ˆì‹œ

<br>

## ğŸ·ï¸ ì„¤ì¹˜ ë° ê¸°ë³¸ ì„¤ì •

<br>

```bash
# ì„¤ì¹˜
npm install zustand

# TypeScript í”„ë¡œì íŠ¸
npm install zustand
```

<br>

## ğŸ·ï¸ ê¸°ë³¸ Store ìƒì„±

<br>

```typescript
// src/stores/counter-store.ts
import { create } from "zustand";

// íƒ€ì… ì •ì˜
interface CounterState {
  count: number;
  increment: () => void;
  decrement: () => void;
  reset: () => void;
  setCount: (value: number) => void;
}

// Store ìƒì„±
export const useCounterStore = create<CounterState>((set) => ({
  // ìƒíƒœ
  count: 0,

  // ì•¡ì…˜
  increment: () => set((state) => ({ count: state.count + 1 })),
  decrement: () => set((state) => ({ count: state.count - 1 })),
  reset: () => set({ count: 0 }),
  setCount: (value) => set({ count: value }),
}));
```

<br>

```tsx
// src/components/Counter.tsx
import { useCounterStore } from "../stores/counter-store";

export const Counter = () => {
  // í•„ìš”í•œ ìƒíƒœì™€ ì•¡ì…˜ë§Œ ì„ íƒ
  const count = useCounterStore((state) => state.count);
  const increment = useCounterStore((state) => state.increment);
  const decrement = useCounterStore((state) => state.decrement);
  const reset = useCounterStore((state) => state.reset);

  return (
    <div>
      <h1>ì¹´ìš´í„°: {count}</h1>
      <button onClick={increment}>+1</button>
      <button onClick={decrement}>-1</button>
      <button onClick={reset}>ì´ˆê¸°í™”</button>
    </div>
  );
};
```

<br>

## ğŸ·ï¸ ì‹¤ì „: ì¥ë°”êµ¬ë‹ˆ Store

<br>

```typescript
// src/types/cart.ts
export interface Product {
  id: string;
  name: string;
  price: number;
  image: string;
}

export interface CartItem extends Product {
  quantity: number;
}
```

<br>

```typescript
// src/stores/cart-store.ts
import { create } from "zustand";
import { persist } from "zustand/middleware";
import { CartItem, Product } from "../types/cart";

interface CartState {
  // ìƒíƒœ
  items: CartItem[];

  // ê³„ì‚°ëœ ê°’ (Getter)
  totalItems: () => number;
  totalPrice: () => number;

  // ì•¡ì…˜
  addItem: (product: Product) => void;
  removeItem: (productId: string) => void;
  updateQuantity: (productId: string, quantity: number) => void;
  clearCart: () => void;
}

export const useCartStore = create<CartState>()(
  persist(
    (set, get) => ({
      items: [],

      // ì´ ìƒí’ˆ ìˆ˜
      totalItems: () => {
        return get().items.reduce((sum, item) => sum + item.quantity, 0);
      },

      // ì´ ê°€ê²©
      totalPrice: () => {
        return get().items.reduce(
          (sum, item) => sum + item.price * item.quantity,
          0
        );
      },

      // ìƒí’ˆ ì¶”ê°€
      addItem: (product) => {
        set((state) => {
          const existingItem = state.items.find(
            (item) => item.id === product.id
          );

          if (existingItem) {
            // ì´ë¯¸ ìˆìœ¼ë©´ ìˆ˜ëŸ‰ ì¦ê°€
            return {
              items: state.items.map((item) =>
                item.id === product.id
                  ? { ...item, quantity: item.quantity + 1 }
                  : item
              ),
            };
          }

          // ì—†ìœ¼ë©´ ìƒˆë¡œ ì¶”ê°€
          return {
            items: [...state.items, { ...product, quantity: 1 }],
          };
        });
      },

      // ìƒí’ˆ ì œê±°
      removeItem: (productId) => {
        set((state) => ({
          items: state.items.filter((item) => item.id !== productId),
        }));
      },

      // ìˆ˜ëŸ‰ ë³€ê²½
      updateQuantity: (productId, quantity) => {
        set((state) => ({
          items: state.items.map((item) =>
            item.id === productId ? { ...item, quantity } : item
          ),
        }));
      },

      // ì¥ë°”êµ¬ë‹ˆ ë¹„ìš°ê¸°
      clearCart: () => set({ items: [] }),
    }),
    {
      name: "cart-storage", // localStorage í‚¤
    }
  )
);
```

<br>

```tsx
// src/components/Cart.tsx
import { useCartStore } from "../stores/cart-store";

export const Cart = () => {
  const items = useCartStore((state) => state.items);
  const totalItems = useCartStore((state) => state.totalItems);
  const totalPrice = useCartStore((state) => state.totalPrice);
  const removeItem = useCartStore((state) => state.removeItem);
  const updateQuantity = useCartStore((state) => state.updateQuantity);
  const clearCart = useCartStore((state) => state.clearCart);

  return (
    <div className="cart">
      <h2>ì¥ë°”êµ¬ë‹ˆ ({totalItems()}ê°œ)</h2>

      {items.length === 0 ? (
        <p>ì¥ë°”êµ¬ë‹ˆê°€ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.</p>
      ) : (
        <>
          <ul>
            {items.map((item) => (
              <li key={item.id}>
                <img src={item.image} alt={item.name} />
                <span>{item.name}</span>
                <span>{item.price.toLocaleString()}ì›</span>
                <input
                  type="number"
                  min="1"
                  value={item.quantity}
                  onChange={(e) =>
                    updateQuantity(item.id, parseInt(e.target.value))
                  }
                />
                <button onClick={() => removeItem(item.id)}>ì‚­ì œ</button>
              </li>
            ))}
          </ul>

          <div className="cart-summary">
            <p>ì´ ê¸ˆì•¡: {totalPrice().toLocaleString()}ì›</p>
            <button onClick={clearCart}>ì¥ë°”êµ¬ë‹ˆ ë¹„ìš°ê¸°</button>
            <button>ê²°ì œí•˜ê¸°</button>
          </div>
        </>
      )}
    </div>
  );
};

// src/components/ProductCard.tsx
import { useCartStore } from "../stores/cart-store";
import { Product } from "../types/cart";

interface ProductCardProps {
  product: Product;
}

export const ProductCard = ({ product }: ProductCardProps) => {
  const addItem = useCartStore((state) => state.addItem);

  return (
    <div className="product-card">
      <img src={product.image} alt={product.name} />
      <h3>{product.name}</h3>
      <p>{product.price.toLocaleString()}ì›</p>
      <button onClick={() => addItem(product)}>ì¥ë°”êµ¬ë‹ˆ ë‹´ê¸°</button>
    </div>
  );
};
```

<br>

## ğŸ·ï¸ ì‹¤ì „: ì¸ì¦ Store

<br>

```typescript
// src/types/auth.ts
export interface User {
  id: string;
  email: string;
  name: string;
  avatar?: string;
}

export interface AuthState {
  user: User | null;
  token: string | null;
  isAuthenticated: boolean;
  isLoading: boolean;
  error: string | null;
}
```

<br>

```typescript
// src/stores/auth-store.ts
import { create } from "zustand";
import { persist, createJSONStorage } from "zustand/middleware";
import { User } from "../types/auth";

interface AuthState {
  // ìƒíƒœ
  user: User | null;
  token: string | null;
  isLoading: boolean;
  error: string | null;

  // ê³„ì‚°ëœ ê°’
  isAuthenticated: () => boolean;

  // ì•¡ì…˜
  login: (email: string, password: string) => Promise<void>;
  logout: () => void;
  updateProfile: (data: Partial<User>) => void;
  clearError: () => void;
}

export const useAuthStore = create<AuthState>()(
  persist(
    (set, get) => ({
      user: null,
      token: null,
      isLoading: false,
      error: null,

      isAuthenticated: () => !!get().token,

      login: async (email, password) => {
        set({ isLoading: true, error: null });

        try {
          // API í˜¸ì¶œ
          const response = await fetch("/api/auth/login", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ email, password }),
          });

          if (!response.ok) {
            throw new Error("ë¡œê·¸ì¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
          }

          const data = await response.json();

          set({
            user: data.user,
            token: data.token,
            isLoading: false,
          });
        } catch (error) {
          set({
            error: error instanceof Error ? error.message : "ì˜¤ë¥˜ ë°œìƒ",
            isLoading: false,
          });
        }
      },

      logout: () => {
        set({
          user: null,
          token: null,
          error: null,
        });
      },

      updateProfile: (data) => {
        set((state) => ({
          user: state.user ? { ...state.user, ...data } : null,
        }));
      },

      clearError: () => set({ error: null }),
    }),
    {
      name: "auth-storage",
      storage: createJSONStorage(() => localStorage),
      partialize: (state) => ({
        user: state.user,
        token: state.token,
      }),
    }
  )
);
```

<br>

```tsx
// src/components/LoginForm.tsx
import { useState } from "react";
import { useAuthStore } from "../stores/auth-store";

export const LoginForm = () => {
  const [email, setEmail] = useState("");
  const [password, setPassword] = useState("");

  const login = useAuthStore((state) => state.login);
  const isLoading = useAuthStore((state) => state.isLoading);
  const error = useAuthStore((state) => state.error);

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    await login(email, password);
  };

  return (
    <form onSubmit={handleSubmit}>
      {error && <div className="error">{error}</div>}

      <input
        type="email"
        value={email}
        onChange={(e) => setEmail(e.target.value)}
        placeholder="ì´ë©”ì¼"
        disabled={isLoading}
      />

      <input
        type="password"
        value={password}
        onChange={(e) => setPassword(e.target.value)}
        placeholder="ë¹„ë°€ë²ˆí˜¸"
        disabled={isLoading}
      />

      <button type="submit" disabled={isLoading}>
        {isLoading ? "ë¡œê·¸ì¸ ì¤‘..." : "ë¡œê·¸ì¸"}
      </button>
    </form>
  );
};

// src/components/Header.tsx
import { useAuthStore } from "../stores/auth-store";

export const Header = () => {
  const user = useAuthStore((state) => state.user);
  const isAuthenticated = useAuthStore((state) => state.isAuthenticated);
  const logout = useAuthStore((state) => state.logout);

  return (
    <header>
      <nav>
        {isAuthenticated() ? (
          <>
            <span>ì•ˆë…•í•˜ì„¸ìš”, {user?.name}ë‹˜</span>
            <button onClick={logout}>ë¡œê·¸ì•„ì›ƒ</button>
          </>
        ) : (
          <a href="/login">ë¡œê·¸ì¸</a>
        )}
      </nav>
    </header>
  );
};
```

<br>

## ğŸ·ï¸ ë¯¸ë“¤ì›¨ì–´ í™œìš©

<br>

### DevTools ì—°ë™

<br>

```typescript
// src/stores/counter-store.ts
import { create } from "zustand";
import { devtools } from "zustand/middleware";

interface CounterState {
  count: number;
  increment: () => void;
}

export const useCounterStore = create<CounterState>()(
  devtools(
    (set) => ({
      count: 0,
      increment: () =>
        set(
          (state) => ({ count: state.count + 1 }),
          false,
          "increment" // ì•¡ì…˜ ì´ë¦„ (DevToolsì— í‘œì‹œ)
        ),
    }),
    { name: "CounterStore" } // Store ì´ë¦„
  )
);
```

<br>

### ì—¬ëŸ¬ ë¯¸ë“¤ì›¨ì–´ ì¡°í•©

<br>

```typescript
// src/stores/app-store.ts
import { create } from "zustand";
import { devtools, persist, subscribeWithSelector } from "zustand/middleware";
import { immer } from "zustand/middleware/immer";

interface AppState {
  theme: "light" | "dark";
  language: "ko" | "en";
  notifications: boolean;
  setTheme: (theme: "light" | "dark") => void;
  setLanguage: (lang: "ko" | "en") => void;
  toggleNotifications: () => void;
}

export const useAppStore = create<AppState>()(
  devtools(
    persist(
      subscribeWithSelector(
        immer((set) => ({
          theme: "light",
          language: "ko",
          notifications: true,

          setTheme: (theme) =>
            set((state) => {
              state.theme = theme;
            }),

          setLanguage: (lang) =>
            set((state) => {
              state.language = lang;
            }),

          toggleNotifications: () =>
            set((state) => {
              state.notifications = !state.notifications;
            }),
        }))
      ),
      { name: "app-settings" }
    ),
    { name: "AppStore" }
  )
);

// ìƒíƒœ ë³€í™” êµ¬ë…
useAppStore.subscribe(
  (state) => state.theme,
  (theme) => {
    document.documentElement.setAttribute("data-theme", theme);
  }
);
```

<br>

## ğŸ·ï¸ ìŠ¬ë¼ì´ìŠ¤ íŒ¨í„´ (ëŒ€ê·œëª¨ ì•±)

<br>

### ìŠ¬ë¼ì´ìŠ¤ íŒ¨í„´ì´ë€?

<br>
í”¼ìë¥¼ ìƒê°í•´ë³´ì. <br>
í”¼ì í•œ íŒì„ ì—¬ëŸ¬ ì¡°ê°ìœ¼ë¡œ ë‚˜ëˆ„ë“¯ì´, <br>
í•˜ë‚˜ì˜ í° Storeë¥¼ ì—¬ëŸ¬ ê°œì˜ ì‘ì€ ì¡°ê°(Slice)ìœ¼ë¡œ ë‚˜ëˆ„ëŠ” íŒ¨í„´ì´ë‹¤. <br><br>

**ì™œ ìŠ¬ë¼ì´ìŠ¤ íŒ¨í„´ì„ ì‚¬ìš©í• ê¹Œ?** <br><br>

**ë¬¸ì œì : í•˜ë‚˜ì˜ ê±°ëŒ€í•œ Store** <br>

```typescript
// âŒ ë‚˜ìœ ì˜ˆ: ëª¨ë“  ìƒíƒœê°€ í•œ íŒŒì¼ì—
const useStore = create((set) => ({
  // ì‚¬ìš©ì ê´€ë ¨
  user: null,
  setUser: () => {},
  logout: () => {},

  // ì¥ë°”êµ¬ë‹ˆ ê´€ë ¨
  items: [],
  addToCart: () => {},
  removeFromCart: () => {},

  // UI ê´€ë ¨
  isSidebarOpen: false,
  isModalOpen: false,
  toggleSidebar: () => {},

  // ì„¤ì • ê´€ë ¨
  theme: "light",
  language: "ko",
  setTheme: () => {},

  // ... ìˆ˜ë°± ì¤„ì˜ ì½”ë“œ
}));
```

<br>

**í•´ê²°ì±…: ìŠ¬ë¼ì´ìŠ¤ë¡œ ë¶„ë¦¬** <br>

```
src/stores/
â”œâ”€â”€ index.ts              # ëª¨ë“  ìŠ¬ë¼ì´ìŠ¤ í•©ì¹˜ê¸°
â”œâ”€â”€ slices/
â”‚   â”œâ”€â”€ user-slice.ts     # ì‚¬ìš©ì ê´€ë ¨
â”‚   â”œâ”€â”€ cart-slice.ts     # ì¥ë°”êµ¬ë‹ˆ ê´€ë ¨
â”‚   â”œâ”€â”€ ui-slice.ts       # UI ê´€ë ¨
â”‚   â””â”€â”€ settings-slice.ts # ì„¤ì • ê´€ë ¨
â””â”€â”€ types/
    â””â”€â”€ store.ts          # íƒ€ì… ì •ì˜
```

<br>

**ìŠ¬ë¼ì´ìŠ¤ íŒ¨í„´ì˜ ì¥ì **: <br>

| ì¥ì             | ì„¤ëª…                              |
| --------------- | --------------------------------- |
| **ê´€ì‹¬ì‚¬ ë¶„ë¦¬** | ê¸°ëŠ¥ë³„ë¡œ ì½”ë“œ ë¶„ë¦¬                |
| **ìœ ì§€ë³´ìˆ˜**    | ìˆ˜ì •í•  íŒŒì¼ ì°¾ê¸° ì‰¬ì›€             |
| **í˜‘ì—…**        | íŒ€ì›ë³„ë¡œ ë‹¤ë¥¸ ìŠ¬ë¼ì´ìŠ¤ ë‹´ë‹¹       |
| **í…ŒìŠ¤íŠ¸**      | ìŠ¬ë¼ì´ìŠ¤ë³„ ë…ë¦½ í…ŒìŠ¤íŠ¸            |
| **ì¬ì‚¬ìš©**      | ë‹¤ë¥¸ í”„ë¡œì íŠ¸ì—ì„œ ìŠ¬ë¼ì´ìŠ¤ ì¬ì‚¬ìš© |

<br>

### ê¸°ë³¸ ìŠ¬ë¼ì´ìŠ¤ êµ¬í˜„

<br>

```typescript
// src/stores/slices/user-slice.ts
import { StateCreator } from "zustand";

export interface UserSlice {
  user: { id: string; name: string } | null;
  setUser: (user: { id: string; name: string } | null) => void;
}

export const createUserSlice: StateCreator<UserSlice> = (set) => ({
  user: null,
  setUser: (user) => set({ user }),
});

// src/stores/slices/cart-slice.ts
import { StateCreator } from "zustand";

export interface CartSlice {
  items: Array<{ id: string; quantity: number }>;
  addToCart: (id: string) => void;
  removeFromCart: (id: string) => void;
}

export const createCartSlice: StateCreator<CartSlice> = (set) => ({
  items: [],
  addToCart: (id) =>
    set((state) => ({
      items: [...state.items, { id, quantity: 1 }],
    })),
  removeFromCart: (id) =>
    set((state) => ({
      items: state.items.filter((item) => item.id !== id),
    })),
});

// src/stores/slices/ui-slice.ts
import { StateCreator } from "zustand";

export interface UISlice {
  isSidebarOpen: boolean;
  isModalOpen: boolean;
  toggleSidebar: () => void;
  openModal: () => void;
  closeModal: () => void;
}

export const createUISlice: StateCreator<UISlice> = (set) => ({
  isSidebarOpen: false,
  isModalOpen: false,
  toggleSidebar: () =>
    set((state) => ({ isSidebarOpen: !state.isSidebarOpen })),
  openModal: () => set({ isModalOpen: true }),
  closeModal: () => set({ isModalOpen: false }),
});

// src/stores/index.ts
import { create } from "zustand";
import { devtools } from "zustand/middleware";
import { UserSlice, createUserSlice } from "./slices/user-slice";
import { CartSlice, createCartSlice } from "./slices/cart-slice";
import { UISlice, createUISlice } from "./slices/ui-slice";

// ëª¨ë“  ìŠ¬ë¼ì´ìŠ¤ í•©ì¹˜ê¸°
type StoreState = UserSlice & CartSlice & UISlice;

export const useStore = create<StoreState>()(
  devtools((...args) => ({
    ...createUserSlice(...args),
    ...createCartSlice(...args),
    ...createUISlice(...args),
  }))
);
```

<br>

### ìŠ¬ë¼ì´ìŠ¤ ê°„ ìƒíƒœ ê³µìœ 

<br>
ìŠ¬ë¼ì´ìŠ¤ë¼ë¦¬ ì„œë¡œì˜ ìƒíƒœì— ì ‘ê·¼í•´ì•¼ í•  ë•Œê°€ ìˆë‹¤. <br>
ì˜ˆ: ì¥ë°”êµ¬ë‹ˆì—ì„œ ë¡œê·¸ì¸ ì—¬ë¶€ í™•ì¸ <br><br>

```typescript
// src/stores/types/store.ts
// ì „ì²´ Store íƒ€ì… ì •ì˜
import { UserSlice } from "../slices/user-slice";
import { CartSlice } from "../slices/cart-slice";

export type StoreState = UserSlice & CartSlice;
```

<br>

```typescript
// src/stores/slices/cart-slice.ts
import { StateCreator } from "zustand";
import { StoreState } from "../types/store";

export interface CartSlice {
  items: Array<{ id: string; quantity: number }>;
  addToCart: (id: string) => void;
  checkout: () => Promise<void>;
}

// ë‘ ë²ˆì§¸ ì œë„¤ë¦­ìœ¼ë¡œ ì „ì²´ Store íƒ€ì… ì „ë‹¬
export const createCartSlice: StateCreator<
  StoreState, // ì „ì²´ Store íƒ€ì…
  [],
  [],
  CartSlice // ì´ ìŠ¬ë¼ì´ìŠ¤ íƒ€ì…
> = (set, get) => ({
  items: [],

  addToCart: (id) => {
    // ë‹¤ë¥¸ ìŠ¬ë¼ì´ìŠ¤(UserSlice)ì˜ ìƒíƒœ ì ‘ê·¼
    const user = get().user;

    if (!user) {
      alert("ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤!");
      return;
    }

    set((state) => ({
      items: [...state.items, { id, quantity: 1 }],
    }));
  },

  checkout: async () => {
    const user = get().user;
    const items = get().items;

    if (!user) {
      throw new Error("ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
    }

    // ê²°ì œ API í˜¸ì¶œ
    await fetch("/api/checkout", {
      method: "POST",
      body: JSON.stringify({ userId: user.id, items }),
    });

    // ì¥ë°”êµ¬ë‹ˆ ë¹„ìš°ê¸°
    set({ items: [] });
  },
});
```

<br>

### ìŠ¬ë¼ì´ìŠ¤ + ë¯¸ë“¤ì›¨ì–´ ì¡°í•©

<br>

```typescript
// src/stores/index.ts
import { create } from "zustand";
import { devtools, persist } from "zustand/middleware";
import { UserSlice, createUserSlice } from "./slices/user-slice";
import { CartSlice, createCartSlice } from "./slices/cart-slice";
import { UISlice, createUISlice } from "./slices/ui-slice";

type StoreState = UserSlice & CartSlice & UISlice;

export const useStore = create<StoreState>()(
  devtools(
    persist(
      (...args) => ({
        ...createUserSlice(...args),
        ...createCartSlice(...args),
        ...createUISlice(...args),
      }),
      {
        name: "app-storage",
        // íŠ¹ì • ìŠ¬ë¼ì´ìŠ¤ë§Œ ì €ì¥
        partialize: (state) => ({
          user: state.user,
          items: state.items,
          // UI ìƒíƒœëŠ” ì €ì¥ ì•ˆ í•¨
        }),
      }
    ),
    { name: "AppStore" }
  )
);
```

<br>

### ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‚¬ìš©

<br>

```tsx
// src/components/Header.tsx
import { useStore } from "../stores";

export const Header = () => {
  // í•„ìš”í•œ ìƒíƒœë§Œ ì„ íƒ (ì„±ëŠ¥ ìµœì í™”)
  const user = useStore((state) => state.user);
  const itemCount = useStore((state) => state.items.length);
  const toggleSidebar = useStore((state) => state.toggleSidebar);

  return (
    <header>
      <button onClick={toggleSidebar}>ë©”ë‰´</button>
      <span>ì¥ë°”êµ¬ë‹ˆ ({itemCount})</span>
      {user ? <span>{user.name}ë‹˜</span> : <a href="/login">ë¡œê·¸ì¸</a>}
    </header>
  );
};

// src/components/Cart.tsx
import { useStore } from "../stores";
import { shallow } from "zustand/shallow";

export const Cart = () => {
  // ì—¬ëŸ¬ ìƒíƒœë¥¼ í•œ ë²ˆì— ì„ íƒ (shallow ë¹„êµ)
  const { items, addToCart, checkout } = useStore(
    (state) => ({
      items: state.items,
      addToCart: state.addToCart,
      checkout: state.checkout,
    }),
    shallow
  );

  return (
    <div>
      {items.map((item) => (
        <div key={item.id}>
          ìƒí’ˆ ID: {item.id}, ìˆ˜ëŸ‰: {item.quantity}
        </div>
      ))}
      <button onClick={checkout}>ê²°ì œí•˜ê¸°</button>
    </div>
  );
};
```

<br>

### ìŠ¬ë¼ì´ìŠ¤ íŒ¨í„´ Best Practices

<br>

| ê·œì¹™              | ì„¤ëª…                            |
| ----------------- | ------------------------------- |
| **ë‹¨ì¼ ì±…ì„**     | í•˜ë‚˜ì˜ ìŠ¬ë¼ì´ìŠ¤ëŠ” í•˜ë‚˜ì˜ ê¸°ëŠ¥ë§Œ |
| **íƒ€ì… ë¶„ë¦¬**     | íƒ€ì…ì€ ë³„ë„ íŒŒì¼ì— ì •ì˜         |
| **ë„¤ì´ë°**        | `create[ê¸°ëŠ¥]Slice` í˜•ì‹        |
| **ì˜ì¡´ì„± ìµœì†Œí™”** | ìŠ¬ë¼ì´ìŠ¤ ê°„ ì˜ì¡´ì„± ì¤„ì´ê¸°       |
| **ì„ íƒì ì‚¬ìš©**   | í•„ìš”í•œ ìƒíƒœë§Œ êµ¬ë…              |

<br>

## ğŸ·ï¸ React ì™¸ë¶€ì—ì„œ ì‚¬ìš©

<br>

```typescript
// src/stores/counter-store.ts
import { create } from "zustand";

interface CounterState {
  count: number;
  increment: () => void;
}

export const useCounterStore = create<CounterState>((set) => ({
  count: 0,
  increment: () => set((state) => ({ count: state.count + 1 })),
}));

// React ì™¸ë¶€ì—ì„œ ìƒíƒœ ì ‘ê·¼
const count = useCounterStore.getState().count;

// React ì™¸ë¶€ì—ì„œ ì•¡ì…˜ í˜¸ì¶œ
useCounterStore.getState().increment();

// ìƒíƒœ ë³€í™” êµ¬ë…
const unsubscribe = useCounterStore.subscribe((state) => {
  console.log("ìƒíƒœ ë³€ê²½:", state.count);
});

// êµ¬ë… í•´ì œ
unsubscribe();
```

<br>

```typescript
// src/utils/api.ts
import { useAuthStore } from "../stores/auth-store";

// API ì¸í„°ì…‰í„°ì—ì„œ í† í° ì‚¬ìš©
export const apiClient = {
  fetch: async (url: string, options: RequestInit = {}) => {
    const token = useAuthStore.getState().token;

    const response = await fetch(url, {
      ...options,
      headers: {
        ...options.headers,
        Authorization: token ? `Bearer ${token}` : "",
      },
    });

    // 401 ì—ëŸ¬ ì‹œ ìë™ ë¡œê·¸ì•„ì›ƒ
    if (response.status === 401) {
      useAuthStore.getState().logout();
    }

    return response;
  },
};
```

<br>

# ì‹¤ì „ ì²´í¬ë¦¬ìŠ¤íŠ¸

<br>

## âœ… Store ì„¤ê³„

<br>

- [ ] ê´€ë ¨ ìƒíƒœë¼ë¦¬ ê·¸ë£¹í™”
- [ ] íƒ€ì… ì •ì˜ ëª…í™•íˆ
- [ ] ì•¡ì…˜ ì´ë¦„ ì§ê´€ì ìœ¼ë¡œ
- [ ] ë¶ˆí•„ìš”í•œ ìƒíƒœ ìµœì†Œí™”

<br>

## âœ… ì„±ëŠ¥ ìµœì í™”

<br>

- [ ] ì„ íƒì(selector) ì‚¬ìš©
- [ ] í•„ìš”í•œ ìƒíƒœë§Œ êµ¬ë…
- [ ] í° ê°ì²´ëŠ” ë¶„ë¦¬
- [ ] ë©”ëª¨ì´ì œì´ì…˜ í™œìš©

<br>

## âœ… ë¯¸ë“¤ì›¨ì–´

<br>

- [ ] persistë¡œ ì˜ì†ì„± ê´€ë¦¬
- [ ] devtoolsë¡œ ë””ë²„ê¹…
- [ ] immerë¡œ ë¶ˆë³€ì„± ê´€ë¦¬
- [ ] subscribeWithSelectorë¡œ êµ¬ë…

<br>

## âœ… êµ¬ì¡°í™”

<br>

- [ ] ìŠ¬ë¼ì´ìŠ¤ íŒ¨í„´ ì ìš©
- [ ] íƒ€ì… íŒŒì¼ ë¶„ë¦¬
- [ ] Store íŒŒì¼ ë¶„ë¦¬
- [ ] í…ŒìŠ¤íŠ¸ ì‘ì„±

<br>

# ìš”ì•½

<br>
ZustandëŠ” ê°„ë‹¨í•˜ê³  ê°•ë ¥í•œ React ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ë‹¤. <br><br>

**ğŸ’ í•µì‹¬ í¬ì¸íŠ¸**:

1. **create**: Store ìƒì„±
2. **set**: ìƒíƒœ ë³€ê²½
3. **get**: í˜„ì¬ ìƒíƒœ ì¡°íšŒ
4. **selector**: í•„ìš”í•œ ìƒíƒœë§Œ êµ¬ë…
5. **persist**: localStorage ì €ì¥
6. **devtools**: Redux DevTools ì—°ë™

<br>

**ğŸ“Œ ì–¸ì œ Zustandë¥¼ ì‚¬ìš©í• ê¹Œ?**:

| ìƒí™©                   | ê¶Œì¥                    |
| ---------------------- | ----------------------- |
| **ê°„ë‹¨í•œ ì „ì—­ ìƒíƒœ**   | Zustand âœ…              |
| **ë³µì¡í•œ ë¹„ë™ê¸° ë¡œì§** | Zustand + React Query   |
| **ì„œë²„ ìƒíƒœ ê´€ë¦¬**     | React Query / SWR       |
| **í¼ ìƒíƒœ**            | React Hook Form         |
| **ëŒ€ê·œëª¨ ì•±**          | Zustand (ìŠ¬ë¼ì´ìŠ¤ íŒ¨í„´) |

<br>

**ğŸš€ Best Practices**:

- ì„ íƒìë¡œ í•„ìš”í•œ ìƒíƒœë§Œ êµ¬ë…
- ê´€ë ¨ ìƒíƒœëŠ” í•˜ë‚˜ì˜ Storeì—
- persistë¡œ ìƒˆë¡œê³ ì¹¨ ëŒ€ì‘
- devtoolsë¡œ ë””ë²„ê¹…
- TypeScript íƒ€ì… ì •ì˜ í•„ìˆ˜
- ìŠ¬ë¼ì´ìŠ¤ íŒ¨í„´ìœ¼ë¡œ í™•ì¥

<br>

Zustandë¥¼ ì‚¬ìš©í•˜ë©´, <br>
Reduxì˜ ë³µì¡í•¨ ì—†ì´ <br>
ê°•ë ¥í•œ ìƒíƒœ ê´€ë¦¬ë¥¼ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤. <br><br>
